{
  "_documentation": {
    "title": "LR Energy SCADA - PLC Data Interface Specification",
    "version": "2.0",
    "date": "February 2026",
    "description": "This JSON template defines the exact data format required from the Siemens S7-1500 PLC using LHTTP library. The PLC will send HTTP POST requests every 60 seconds to the cloud API.",
    "plc_type": "Siemens S7-1500 with LHTTP Library",
    "contact": "IT Department - LR Energy",
    "notes": [
      "All values should be provided in the specified units",
      "Use NULL for any unavailable/faulty sensor reading",
      "Totalizers are cumulative counters (never reset)",
      "Status fields use 0=Off, 1=On/Running",
      "PLC developer must map each JSON field to corresponding PLC tag address"
    ]
  },

  "_plc_configuration": {
    "plc_model": "Siemens S7-1500",
    "library": "LHTTP (Library for HTTP Communication)",
    "function_block": "LHTTP_Post",
    "protocol": "HTTPS (recommended) or HTTP",
    "tls_required": "Yes for HTTPS - Import Root CA certificate in TIA Portal",
    "data_format": "JSON String",
    "frequency": "Every 60 seconds via timer trigger"
  },

  "_api_configuration": {
    "endpoint": "https://karnal.lrenergy.in/scada-api/receive_data.php",
    "method": "POST",
    "content_type": "application/json",
    "authentication": {
      "method": "API Key in URL (LHTTP does not support custom headers)",
      "full_url": "https://karnal.lrenergy.in/scada-api/receive_data.php?api_key=SCADA_LR_ENERGY_2026_SECURE_KEY",
      "api_key": "SCADA_LR_ENERGY_2026_SECURE_KEY"
    },
    "total_fields": 37,
    "response_codes": {
      "201": "Success - Data saved",
      "200": "Duplicate - Data already exists for this timestamp",
      "400": "Bad Request - Invalid JSON or missing fields",
      "401": "Unauthorized - Invalid API key",
      "500": "Server Error - Retry later"
    }
  },

  "_lhttp_post_configuration": {
    "description": "TIA Portal LHTTP_Post function block parameters",
    "parameters": {
      "execute": "BOOL - Set TRUE to trigger POST request (use 60s timer)",
      "hwID": "HW_ANY - Hardware ID of Ethernet interface",
      "connID": "CONN_OUC - Unique connection ID (e.g., 1)",
      "url": "STRING - Full URL with API key: https://karnal.lrenergy.in/scada-api/receive_data.php?api_key=SCADA_LR_ENERGY_2026_SECURE_KEY",
      "data": "STRING - JSON payload built from PLC tags",
      "tls": "LHTTP_typeTLS - TLS configuration (for HTTPS only)",
      "responseData": "ARRAY[0..1023] OF CHAR - Buffer for server response"
    },
    "outputs": {
      "done": "BOOL - Request completed",
      "busy": "BOOL - Request in progress",
      "error": "BOOL - Error occurred",
      "statusID": "USINT - Error source",
      "status": "WORD - Status/error code",
      "responseCode": "UINT - HTTP response code (201=success)",
      "length": "UDINT - Response data length"
    }
  },

  "data": {
    "_section_1_metadata": {
      "description": "Timestamp and plant identification"
    },
    "timestamp": {
      "description": "Reading timestamp",
      "format": "YYYY-MM-DD HH:MM:SS",
      "example": "2026-02-12 10:30:00",
      "source": "System clock at time of reading",
      "required": true
    },
    "plant_id": {
      "description": "Plant identifier",
      "format": "String",
      "example": "KARNAL",
      "source": "Configuration constant",
      "required": true
    },

    "_section_2_gas_flow": {
      "description": "Gas flow measurements - 6 fields",
      "instruments": "Flow meters on gas lines"
    },
    "raw_biogas_flow": {
      "description": "Raw biogas flow rate (instantaneous)",
      "unit": "Nm³/hr",
      "data_type": "DECIMAL(10,2)",
      "range": "0 - 2000",
      "example": 1250.50,
      "tag_address": "<<PLC_TAG_ADDRESS>>",
      "required": true
    },
    "raw_biogas_totalizer": {
      "description": "Raw biogas cumulative total (never resets)",
      "unit": "Nm³",
      "data_type": "DECIMAL(15,2)",
      "range": "0 - 99999999",
      "example": 150000.00,
      "tag_address": "<<PLC_TAG_ADDRESS>>",
      "note": "Cumulative counter - used to calculate daily production",
      "required": true
    },
    "purified_gas_flow": {
      "description": "Purified gas flow rate (after PSA)",
      "unit": "Nm³/hr",
      "data_type": "DECIMAL(10,2)",
      "range": "0 - 2000",
      "example": 1180.20,
      "tag_address": "<<PLC_TAG_ADDRESS>>",
      "required": true
    },
    "purified_gas_totalizer": {
      "description": "Purified gas cumulative total",
      "unit": "Nm³",
      "data_type": "DECIMAL(15,2)",
      "range": "0 - 99999999",
      "example": 142000.00,
      "tag_address": "<<PLC_TAG_ADDRESS>>",
      "required": true
    },
    "product_gas_flow": {
      "description": "Product gas flow rate (final output)",
      "unit": "Nm³/hr",
      "data_type": "DECIMAL(10,2)",
      "range": "0 - 2000",
      "example": 1150.80,
      "tag_address": "<<PLC_TAG_ADDRESS>>",
      "required": true
    },
    "product_gas_totalizer": {
      "description": "Product gas cumulative total",
      "unit": "Nm³",
      "data_type": "DECIMAL(15,2)",
      "range": "0 - 99999999",
      "example": 138000.00,
      "tag_address": "<<PLC_TAG_ADDRESS>>",
      "required": true
    },

    "_section_3_gas_composition": {
      "description": "Gas quality/composition - 5 fields",
      "instruments": "Gas analyzer"
    },
    "ch4_concentration": {
      "description": "Methane (CH4) concentration",
      "unit": "%",
      "data_type": "DECIMAL(5,2)",
      "range": "0 - 100",
      "normal_range": "94 - 98",
      "example": 96.80,
      "tag_address": "<<PLC_TAG_ADDRESS>>",
      "required": true
    },
    "co2_level": {
      "description": "Carbon dioxide (CO2) level",
      "unit": "%",
      "data_type": "DECIMAL(5,2)",
      "range": "0 - 100",
      "normal_range": "1 - 5",
      "example": 2.90,
      "tag_address": "<<PLC_TAG_ADDRESS>>",
      "required": true
    },
    "o2_concentration": {
      "description": "Oxygen (O2) concentration",
      "unit": "%",
      "data_type": "DECIMAL(5,2)",
      "range": "0 - 21",
      "normal_range": "0 - 0.5",
      "example": 0.30,
      "tag_address": "<<PLC_TAG_ADDRESS>>",
      "required": true
    },
    "h2s_content": {
      "description": "Hydrogen sulfide (H2S) content",
      "unit": "ppm",
      "data_type": "DECIMAL(10,2)",
      "range": "0 - 105",
      "normal_range": "0 - 5",
      "status_rule": "< 5 ppm = Accepted, >= 5 ppm = Critical",
      "example": 3.00,
      "tag_address": "<<PLC_TAG_ADDRESS>>",
      "required": true
    },
    "dew_point": {
      "description": "Dew point measurement",
      "unit": "mg/m³",
      "data_type": "DECIMAL(10,2)",
      "range": "-100 - 100",
      "example": -68.00,
      "tag_address": "<<PLC_TAG_ADDRESS>>",
      "required": true
    },

    "_section_4_digester_1": {
      "description": "Digester 1 parameters - 6 fields",
      "location": "Primary digester tank"
    },
    "d1_temp_bottom": {
      "description": "Digester 1 bottom temperature",
      "unit": "°C",
      "data_type": "DECIMAL(5,2)",
      "range": "0 - 60",
      "normal_range": "35 - 42",
      "example": 37.00,
      "tag_address": "<<PLC_TAG_ADDRESS>>",
      "required": true
    },
    "d1_temp_top": {
      "description": "Digester 1 top temperature",
      "unit": "°C",
      "data_type": "DECIMAL(5,2)",
      "range": "0 - 60",
      "normal_range": "35 - 42",
      "example": 36.50,
      "tag_address": "<<PLC_TAG_ADDRESS>>",
      "required": true
    },
    "d1_gas_pressure": {
      "description": "Digester 1 balloon gas pressure",
      "unit": "mbar",
      "data_type": "DECIMAL(10,2)",
      "range": "0 - 100",
      "normal_range": "20 - 50",
      "example": 32.00,
      "tag_address": "<<PLC_TAG_ADDRESS>>",
      "required": true
    },
    "d1_air_pressure": {
      "description": "Digester 1 balloon air pressure",
      "unit": "mbar",
      "data_type": "DECIMAL(10,2)",
      "range": "0 - 100",
      "normal_range": "10 - 30",
      "example": 18.00,
      "tag_address": "<<PLC_TAG_ADDRESS>>",
      "required": true
    },
    "d1_slurry_height": {
      "description": "Digester 1 slurry height/level",
      "unit": "m",
      "data_type": "DECIMAL(5,2)",
      "range": "0 - 15",
      "normal_range": "5 - 10",
      "example": 7.60,
      "tag_address": "<<PLC_TAG_ADDRESS>>",
      "required": true
    },
    "d1_gas_level": {
      "description": "Digester 1 gas storage level",
      "unit": "%",
      "data_type": "DECIMAL(5,2)",
      "range": "0 - 100",
      "normal_range": "50 - 85",
      "example": 75.00,
      "tag_address": "<<PLC_TAG_ADDRESS>>",
      "required": true
    },

    "_section_5_digester_2": {
      "description": "Digester 2 parameters - 6 fields",
      "location": "Secondary digester tank"
    },
    "d2_temp_bottom": {
      "description": "Digester 2 bottom temperature",
      "unit": "°C",
      "data_type": "DECIMAL(5,2)",
      "range": "0 - 60",
      "normal_range": "35 - 42",
      "example": 36.50,
      "tag_address": "<<PLC_TAG_ADDRESS>>",
      "required": true
    },
    "d2_temp_top": {
      "description": "Digester 2 top temperature",
      "unit": "°C",
      "data_type": "DECIMAL(5,2)",
      "range": "0 - 60",
      "normal_range": "35 - 42",
      "example": 36.00,
      "tag_address": "<<PLC_TAG_ADDRESS>>",
      "required": true
    },
    "d2_gas_pressure": {
      "description": "Digester 2 balloon gas pressure",
      "unit": "mbar",
      "data_type": "DECIMAL(10,2)",
      "range": "0 - 100",
      "normal_range": "20 - 50",
      "example": 30.00,
      "tag_address": "<<PLC_TAG_ADDRESS>>",
      "required": true
    },
    "d2_air_pressure": {
      "description": "Digester 2 balloon air pressure",
      "unit": "mbar",
      "data_type": "DECIMAL(10,2)",
      "range": "0 - 100",
      "normal_range": "10 - 30",
      "example": 17.00,
      "tag_address": "<<PLC_TAG_ADDRESS>>",
      "required": true
    },
    "d2_slurry_height": {
      "description": "Digester 2 slurry height/level",
      "unit": "m",
      "data_type": "DECIMAL(5,2)",
      "range": "0 - 15",
      "normal_range": "5 - 10",
      "example": 7.30,
      "tag_address": "<<PLC_TAG_ADDRESS>>",
      "required": true
    },
    "d2_gas_level": {
      "description": "Digester 2 gas storage level",
      "unit": "%",
      "data_type": "DECIMAL(5,2)",
      "range": "0 - 100",
      "normal_range": "50 - 85",
      "example": 72.00,
      "tag_address": "<<PLC_TAG_ADDRESS>>",
      "required": true
    },

    "_section_6_tank_levels": {
      "description": "Storage tank levels - 2 fields"
    },
    "buffer_tank_level": {
      "description": "Buffer tank level",
      "unit": "%",
      "data_type": "DECIMAL(5,2)",
      "range": "0 - 100",
      "normal_range": "30 - 90",
      "example": 82.00,
      "tag_address": "<<PLC_TAG_ADDRESS>>",
      "required": true
    },
    "lagoon_tank_level": {
      "description": "Lagoon tank level",
      "unit": "%",
      "data_type": "DECIMAL(5,2)",
      "range": "0 - 100",
      "normal_range": "30 - 90",
      "example": 76.00,
      "tag_address": "<<PLC_TAG_ADDRESS>>",
      "required": true
    },

    "_section_7_water_flow": {
      "description": "Water flow meters - 8 fields"
    },
    "feed_fm1_flow": {
      "description": "Feed flow meter 1 - current flow rate",
      "unit": "m³/hr",
      "data_type": "DECIMAL(10,2)",
      "range": "0 - 100",
      "example": 42.00,
      "tag_address": "<<PLC_TAG_ADDRESS>>",
      "required": true
    },
    "feed_fm1_totalizer": {
      "description": "Feed flow meter 1 - cumulative total",
      "unit": "m³",
      "data_type": "DECIMAL(15,2)",
      "range": "0 - 99999999",
      "example": 5000.00,
      "tag_address": "<<PLC_TAG_ADDRESS>>",
      "required": true
    },
    "feed_fm2_flow": {
      "description": "Feed flow meter 2 - current flow rate",
      "unit": "m³/hr",
      "data_type": "DECIMAL(10,2)",
      "range": "0 - 100",
      "example": 38.00,
      "tag_address": "<<PLC_TAG_ADDRESS>>",
      "required": true
    },
    "feed_fm2_totalizer": {
      "description": "Feed flow meter 2 - cumulative total",
      "unit": "m³",
      "data_type": "DECIMAL(15,2)",
      "range": "0 - 99999999",
      "example": 4500.00,
      "tag_address": "<<PLC_TAG_ADDRESS>>",
      "required": true
    },
    "fresh_water_flow": {
      "description": "Fresh water flow - current flow rate",
      "unit": "m³/hr",
      "data_type": "DECIMAL(10,2)",
      "range": "0 - 50",
      "example": 12.00,
      "tag_address": "<<PLC_TAG_ADDRESS>>",
      "required": true
    },
    "fresh_water_totalizer": {
      "description": "Fresh water - cumulative total",
      "unit": "m³",
      "data_type": "DECIMAL(15,2)",
      "range": "0 - 99999999",
      "example": 1500.00,
      "tag_address": "<<PLC_TAG_ADDRESS>>",
      "required": true
    },
    "recycle_water_flow": {
      "description": "Recycle water flow - current flow rate",
      "unit": "m³/hr",
      "data_type": "DECIMAL(10,2)",
      "range": "0 - 100",
      "example": 26.00,
      "tag_address": "<<PLC_TAG_ADDRESS>>",
      "required": true
    },
    "recycle_water_totalizer": {
      "description": "Recycle water - cumulative total",
      "unit": "m³",
      "data_type": "DECIMAL(15,2)",
      "range": "0 - 99999999",
      "example": 3000.00,
      "tag_address": "<<PLC_TAG_ADDRESS>>",
      "required": true
    },

    "_section_8_equipment": {
      "description": "Equipment status and power - 4 fields"
    },
    "psa_status": {
      "description": "PSA unit running status",
      "unit": "Boolean",
      "data_type": "TINYINT(1)",
      "values": {
        "0": "Off/Stopped",
        "1": "On/Running"
      },
      "example": 1,
      "tag_address": "<<PLC_TAG_ADDRESS>>",
      "note": "Used to calculate PSA running hours",
      "required": true
    },
    "psa_efficiency": {
      "description": "PSA efficiency (if available from SCADA)",
      "unit": "%",
      "data_type": "DECIMAL(5,2)",
      "range": "0 - 100",
      "normal_range": "90 - 98",
      "example": 94.40,
      "tag_address": "<<PLC_TAG_ADDRESS>>",
      "note": "Can be calculated server-side if not available: (purified_gas_flow / raw_biogas_flow) × 100",
      "required": false
    },
    "lt_panel_power": {
      "description": "LT Panel current power load",
      "unit": "kW",
      "data_type": "DECIMAL(10,2)",
      "range": "0 - 500",
      "normal_range": "150 - 300",
      "example": 245.00,
      "tag_address": "<<PLC_TAG_ADDRESS>>",
      "note": "Used to calculate daily/monthly power consumption",
      "required": true
    },
    "compressor_status": {
      "description": "Compressor running status",
      "unit": "Boolean",
      "data_type": "TINYINT(1)",
      "values": {
        "0": "Off/Stopped",
        "1": "On/Running"
      },
      "example": 1,
      "tag_address": "<<PLC_TAG_ADDRESS>>",
      "note": "Used to calculate compressor running hours",
      "required": true
    }
  },

  "_sample_json_payload": {
    "description": "This is the exact JSON format to send to the API every 60 seconds",
    "note": "API key is passed in URL, not in JSON body or headers",
    "full_url": "https://karnal.lrenergy.in/scada-api/receive_data.php?api_key=SCADA_LR_ENERGY_2026_SECURE_KEY",
    "content_type": "application/json",
    "method": "POST",
    "payload": {
      "timestamp": "2026-02-12 10:30:00",
      "plant_id": "KARNAL",
      "raw_biogas_flow": 1250.50,
      "raw_biogas_totalizer": 150000.00,
      "purified_gas_flow": 1180.20,
      "purified_gas_totalizer": 142000.00,
      "product_gas_flow": 1150.80,
      "product_gas_totalizer": 138000.00,
      "ch4_concentration": 96.80,
      "co2_level": 2.90,
      "o2_concentration": 0.30,
      "h2s_content": 3.00,
      "dew_point": -68.00,
      "d1_temp_bottom": 37.00,
      "d1_temp_top": 36.50,
      "d1_gas_pressure": 32.00,
      "d1_air_pressure": 18.00,
      "d1_slurry_height": 7.60,
      "d1_gas_level": 75.00,
      "d2_temp_bottom": 36.50,
      "d2_temp_top": 36.00,
      "d2_gas_pressure": 30.00,
      "d2_air_pressure": 17.00,
      "d2_slurry_height": 7.30,
      "d2_gas_level": 72.00,
      "buffer_tank_level": 82.00,
      "lagoon_tank_level": 76.00,
      "feed_fm1_flow": 42.00,
      "feed_fm1_totalizer": 5000.00,
      "feed_fm2_flow": 38.00,
      "feed_fm2_totalizer": 4500.00,
      "fresh_water_flow": 12.00,
      "fresh_water_totalizer": 1500.00,
      "recycle_water_flow": 26.00,
      "recycle_water_totalizer": 3000.00,
      "psa_status": 1,
      "psa_efficiency": 94.40,
      "lt_panel_power": 245.00,
      "compressor_status": 1
    }
  },

  "_tag_mapping_template": {
    "description": "PLC developer MUST fill in the actual S7-1500 tag addresses below",
    "format": "Siemens S7-1500 Data Block format (e.g., DB1.DBD0, DB1.DBX0.0)",
    "note": "These addresses are used internally in PLC program to build JSON string",
    "common_data_types": {
      "REAL": "For flow rates, temperatures, pressures (4 bytes)",
      "DINT": "For totalizers (4 bytes integer)",
      "BOOL": "For status fields (1 bit)"
    },
    "tags": {
      "raw_biogas_flow": {"address": "<<FILL>>", "plc_type": "REAL", "example": "DB10.DBD0"},
      "raw_biogas_totalizer": {"address": "<<FILL>>", "plc_type": "REAL", "example": "DB10.DBD4"},
      "purified_gas_flow": {"address": "<<FILL>>", "plc_type": "REAL", "example": "DB10.DBD8"},
      "purified_gas_totalizer": {"address": "<<FILL>>", "plc_type": "REAL", "example": "DB10.DBD12"},
      "product_gas_flow": {"address": "<<FILL>>", "plc_type": "REAL", "example": "DB10.DBD16"},
      "product_gas_totalizer": {"address": "<<FILL>>", "plc_type": "REAL", "example": "DB10.DBD20"},
      "ch4_concentration": {"address": "<<FILL>>", "plc_type": "REAL", "example": "DB10.DBD24"},
      "co2_level": {"address": "<<FILL>>", "plc_type": "REAL", "example": "DB10.DBD28"},
      "o2_concentration": {"address": "<<FILL>>", "plc_type": "REAL", "example": "DB10.DBD32"},
      "h2s_content": {"address": "<<FILL>>", "plc_type": "REAL", "example": "DB10.DBD36"},
      "dew_point": {"address": "<<FILL>>", "plc_type": "REAL", "example": "DB10.DBD40"},
      "d1_temp_bottom": {"address": "<<FILL>>", "plc_type": "REAL", "example": "DB10.DBD44"},
      "d1_temp_top": {"address": "<<FILL>>", "plc_type": "REAL", "example": "DB10.DBD48"},
      "d1_gas_pressure": {"address": "<<FILL>>", "plc_type": "REAL", "example": "DB10.DBD52"},
      "d1_air_pressure": {"address": "<<FILL>>", "plc_type": "REAL", "example": "DB10.DBD56"},
      "d1_slurry_height": {"address": "<<FILL>>", "plc_type": "REAL", "example": "DB10.DBD60"},
      "d1_gas_level": {"address": "<<FILL>>", "plc_type": "REAL", "example": "DB10.DBD64"},
      "d2_temp_bottom": {"address": "<<FILL>>", "plc_type": "REAL", "example": "DB10.DBD68"},
      "d2_temp_top": {"address": "<<FILL>>", "plc_type": "REAL", "example": "DB10.DBD72"},
      "d2_gas_pressure": {"address": "<<FILL>>", "plc_type": "REAL", "example": "DB10.DBD76"},
      "d2_air_pressure": {"address": "<<FILL>>", "plc_type": "REAL", "example": "DB10.DBD80"},
      "d2_slurry_height": {"address": "<<FILL>>", "plc_type": "REAL", "example": "DB10.DBD84"},
      "d2_gas_level": {"address": "<<FILL>>", "plc_type": "REAL", "example": "DB10.DBD88"},
      "buffer_tank_level": {"address": "<<FILL>>", "plc_type": "REAL", "example": "DB10.DBD92"},
      "lagoon_tank_level": {"address": "<<FILL>>", "plc_type": "REAL", "example": "DB10.DBD96"},
      "feed_fm1_flow": {"address": "<<FILL>>", "plc_type": "REAL", "example": "DB10.DBD100"},
      "feed_fm1_totalizer": {"address": "<<FILL>>", "plc_type": "REAL", "example": "DB10.DBD104"},
      "feed_fm2_flow": {"address": "<<FILL>>", "plc_type": "REAL", "example": "DB10.DBD108"},
      "feed_fm2_totalizer": {"address": "<<FILL>>", "plc_type": "REAL", "example": "DB10.DBD112"},
      "fresh_water_flow": {"address": "<<FILL>>", "plc_type": "REAL", "example": "DB10.DBD116"},
      "fresh_water_totalizer": {"address": "<<FILL>>", "plc_type": "REAL", "example": "DB10.DBD120"},
      "recycle_water_flow": {"address": "<<FILL>>", "plc_type": "REAL", "example": "DB10.DBD124"},
      "recycle_water_totalizer": {"address": "<<FILL>>", "plc_type": "REAL", "example": "DB10.DBD128"},
      "psa_status": {"address": "<<FILL>>", "plc_type": "BOOL", "example": "DB10.DBX132.0"},
      "psa_efficiency": {"address": "<<FILL>>", "plc_type": "REAL", "example": "DB10.DBD134"},
      "lt_panel_power": {"address": "<<FILL>>", "plc_type": "REAL", "example": "DB10.DBD138"},
      "compressor_status": {"address": "<<FILL>>", "plc_type": "BOOL", "example": "DB10.DBX142.0"}
    }
  },

  "_field_summary_table": {
    "description": "Quick reference of all 37 fields",
    "fields": [
      {"#": 1, "field": "timestamp", "unit": "DateTime", "type": "String"},
      {"#": 2, "field": "plant_id", "unit": "-", "type": "String"},
      {"#": 3, "field": "raw_biogas_flow", "unit": "Nm³/hr", "type": "Decimal"},
      {"#": 4, "field": "raw_biogas_totalizer", "unit": "Nm³", "type": "Decimal"},
      {"#": 5, "field": "purified_gas_flow", "unit": "Nm³/hr", "type": "Decimal"},
      {"#": 6, "field": "purified_gas_totalizer", "unit": "Nm³", "type": "Decimal"},
      {"#": 7, "field": "product_gas_flow", "unit": "Nm³/hr", "type": "Decimal"},
      {"#": 8, "field": "product_gas_totalizer", "unit": "Nm³", "type": "Decimal"},
      {"#": 9, "field": "ch4_concentration", "unit": "%", "type": "Decimal"},
      {"#": 10, "field": "co2_level", "unit": "%", "type": "Decimal"},
      {"#": 11, "field": "o2_concentration", "unit": "%", "type": "Decimal"},
      {"#": 12, "field": "h2s_content", "unit": "ppm", "type": "Decimal"},
      {"#": 13, "field": "dew_point", "unit": "mg/m³", "type": "Decimal"},
      {"#": 14, "field": "d1_temp_bottom", "unit": "°C", "type": "Decimal"},
      {"#": 15, "field": "d1_temp_top", "unit": "°C", "type": "Decimal"},
      {"#": 16, "field": "d1_gas_pressure", "unit": "mbar", "type": "Decimal"},
      {"#": 17, "field": "d1_air_pressure", "unit": "mbar", "type": "Decimal"},
      {"#": 18, "field": "d1_slurry_height", "unit": "m", "type": "Decimal"},
      {"#": 19, "field": "d1_gas_level", "unit": "%", "type": "Decimal"},
      {"#": 20, "field": "d2_temp_bottom", "unit": "°C", "type": "Decimal"},
      {"#": 21, "field": "d2_temp_top", "unit": "°C", "type": "Decimal"},
      {"#": 22, "field": "d2_gas_pressure", "unit": "mbar", "type": "Decimal"},
      {"#": 23, "field": "d2_air_pressure", "unit": "mbar", "type": "Decimal"},
      {"#": 24, "field": "d2_slurry_height", "unit": "m", "type": "Decimal"},
      {"#": 25, "field": "d2_gas_level", "unit": "%", "type": "Decimal"},
      {"#": 26, "field": "buffer_tank_level", "unit": "%", "type": "Decimal"},
      {"#": 27, "field": "lagoon_tank_level", "unit": "%", "type": "Decimal"},
      {"#": 28, "field": "feed_fm1_flow", "unit": "m³/hr", "type": "Decimal"},
      {"#": 29, "field": "feed_fm1_totalizer", "unit": "m³", "type": "Decimal"},
      {"#": 30, "field": "feed_fm2_flow", "unit": "m³/hr", "type": "Decimal"},
      {"#": 31, "field": "feed_fm2_totalizer", "unit": "m³", "type": "Decimal"},
      {"#": 32, "field": "fresh_water_flow", "unit": "m³/hr", "type": "Decimal"},
      {"#": 33, "field": "fresh_water_totalizer", "unit": "m³", "type": "Decimal"},
      {"#": 34, "field": "recycle_water_flow", "unit": "m³/hr", "type": "Decimal"},
      {"#": 35, "field": "recycle_water_totalizer", "unit": "m³", "type": "Decimal"},
      {"#": 36, "field": "psa_status", "unit": "0/1", "type": "Integer"},
      {"#": 37, "field": "psa_efficiency", "unit": "%", "type": "Decimal"},
      {"#": 38, "field": "lt_panel_power", "unit": "kW", "type": "Decimal"},
      {"#": 39, "field": "compressor_status", "unit": "0/1", "type": "Integer"}
    ]
  },

  "_important_notes_for_plc_developer": [
    "1. TOTALIZERS: These are cumulative counters that should NEVER reset. Used to calculate daily production (MAX - MIN for the day).",
    "2. STATUS FIELDS: psa_status and compressor_status must be 0 (Off) or 1 (Running). Used to calculate equipment running hours.",
    "3. NULL HANDLING: If a sensor reading is unavailable, omit the field or send null. The system handles NULLs appropriately.",
    "4. TIMESTAMP: Must be synchronized with server time. Format: 'YYYY-MM-DD HH:MM:SS' in IST timezone (Asia/Kolkata).",
    "5. DATA FREQUENCY: Send data every 60 seconds using PLC timer. Missing data points affect dashboard accuracy.",
    "6. DECIMAL PRECISION: Flow rates to 2 decimal places, percentages to 2 decimal places.",
    "7. UNITS: Ensure all values are in the specified units before sending. No unit conversion is done server-side.",
    "8. API KEY: Pass API key in URL parameter (?api_key=...) since LHTTP does not support custom HTTP headers.",
    "9. HTTPS: Use HTTPS for secure communication. Import server Root CA certificate in TIA Portal Certificate Manager.",
    "10. JSON STRING: Build JSON string in PLC by concatenating field names and values. Use REAL_TO_STRING for conversions.",
    "11. RESPONSE CHECK: Check LHTTP_Post.responseCode output - 201 means success, 200 means duplicate (already saved).",
    "12. ERROR HANDLING: Implement retry logic if LHTTP_Post.error is TRUE. Check status code for specific error."
  ],

  "_action_required_from_plc_developer": {
    "description": "PLC developer must complete these items before integration",
    "items": [
      "1. Fill in all PLC tag addresses in '_tag_mapping_template' section above",
      "2. Import SSL Root CA certificate in TIA Portal for HTTPS",
      "3. Create Data Block (DB) for LHTTP_typeTLS configuration",
      "4. Create timer block for 60-second interval",
      "5. Write PLC logic to build JSON string from tag values",
      "6. Configure LHTTP_Post function block with correct URL and TLS",
      "7. Implement error handling and retry logic",
      "8. Test with single POST request before enabling timer"
    ],
    "deliverables_to_send_back": [
      "Completed tag mapping table with actual PLC addresses",
      "Confirmation of successful test POST request",
      "Screenshot of LHTTP_Post configuration in TIA Portal"
    ]
  }
}
